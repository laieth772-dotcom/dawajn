<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ§Ø¬Ù†</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family: Tahoma;
  background:#eef2f3;
  text-align:center;
  margin:0;
}
.container{padding:20px}
input,button{
  width:85%;
  padding:12px;
  margin:8px;
}
button{
  background:#2e8b57;
  color:#fff;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
  padding:20px;
}
.card{
  background:#fff;
  padding:20px;
  border-radius:10px;
}
.hidden{display:none}
</style>
</head>

<body>

<div class="container" id="loginBox">
  <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
  <input id="email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
  <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  <p><a href="#" onclick="showRegister()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a></p>
</div>

<div class="container hidden" id="registerBox">
  <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h2>
  <input id="rEmail" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
  <input id="rPassword" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
  <button onclick="showLogin()">Ø±Ø¬ÙˆØ¹</button>
</div>

<div class="container hidden" id="dashboard">
  <h1>ğŸ” Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ§Ø¬Ù†</h1>
  <div class="grid">
    <div class="card" onclick="addData('Ø§Ù„Ø¯Ø¬Ø§Ø¬')">ğŸ” Ø§Ù„Ø¯Ø¬Ø§Ø¬</div>
    <div class="card" onclick="addData('Ø§Ù„Ø£ÙØ±Ø§Ø®')">ğŸ£ Ø§Ù„Ø£ÙØ±Ø§Ø®</div>
    <div class="card" onclick="addData('Ø§Ù„Ø¨ÙŠØ¶')">ğŸ¥š Ø§Ù„Ø¨ÙŠØ¶</div>
    <div class="card" onclick="addData('Ø§Ù„Ù…ÙÙ‚Ø³Ø©')">ğŸ¤ Ø§Ù„Ù…ÙÙ‚Ø³Ø©</div>
    <div class="card" onclick="addData('Ø§Ù„Ø¹Ù„Ù ÙˆØ§Ù„Ø£Ø¯ÙˆÙŠØ©')">ğŸŒ¾ Ø§Ù„Ø¹Ù„Ù ÙˆØ§Ù„Ø£Ø¯ÙˆÙŠØ©</div>
    <div class="card" onclick="addData('Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø±')">â³ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø±</div>
    <div class="card" onclick="sendNotify()">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</div>
    <div class="card" onclick="addData('Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø¦Ø±')">ğŸ’° Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø¦Ø±</div>
  </div>
  <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth,signInWithEmailAndPassword,createUserWithEmailAndPassword,onAuthStateChanged,signOut }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore,collection,addDoc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ğŸ”´ ØºÙŠÙ‘Ø± Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ØªØ§Ù„ÙŠØ© ÙÙ‚Ø· */
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  projectId: "PROJECT_ID",
  storageBucket: "PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.login = () =>{
  signInWithEmailAndPassword(auth,email.value,password.value)
  .catch(e=>alert(e.message));
};

window.register = () =>{
  createUserWithEmailAndPassword(auth,rEmail.value,rPassword.value)
  .then(showLogin)
  .catch(e=>alert(e.message));
};

window.logout = ()=>signOut(auth);

window.addData = async(section)=>{
  const value = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:");
  if(!value)return;
  await addDoc(collection(db,section),{
    value:value,
    date:new Date()
  });
  alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ”");
};

window.sendNotify = ()=>{
  if(Notification.permission!=="granted")
    Notification.requestPermission();
  new Notification("Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ§Ø¬Ù†",{body:"ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…"});
};

window.showRegister = ()=>{
  loginBox.classList.add("hidden");
  registerBox.classList.remove("hidden");
};

window.showLogin = ()=>{
  registerBox.classList.add("hidden");
  loginBox.classList.remove("hidden");
};

onAuthStateChanged(auth,user=>{
  if(user){
    loginBox.classList.add("hidden");
    registerBox.classList.add("hidden");
    dashboard.classList.remove("hidden");
  }else{
    dashboard.classList.add("hidden");
    loginBox.classList.remove("hidden");
  }
});
</script>

</body>
</html>
